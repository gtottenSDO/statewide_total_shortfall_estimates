{
  "hash": "96ef68e0c765f9c0eda3908f44b1e84c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Estimating Colorado's Housing Shortfall\nauthors:\n  - name: Greg Totten\n    affiliation: Colorado State Demography Office\nbibliography: references.bib\n---\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: Your system is mis-configured: '/etc/localtime' is not a symlink\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: It is strongly recommended to set envionment variable TZ to\n'America/Denver' (or equivalent)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.4     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(ipumsr)\nlibrary(duckplyr)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nThe duckplyr package is configured to fall back to dplyr when it encounters an\nincompatibility. Fallback events can be collected and uploaded for analysis to\nguide future development. By default, data will be collected but no data will\nbe uploaded.\nℹ Automatic fallback uploading is not controlled and therefore disabled, see\n  `?duckplyr::fallback()`.\n✔ Number of reports ready for upload: 3.\n→ Review with `duckplyr::fallback_review()`, upload with\n  `duckplyr::fallback_upload()`.\nℹ Configure automatic uploading with `duckplyr::fallback_config()`.\n✔ Overwriting dplyr methods with duckplyr methods.\nℹ Turn off with `duckplyr::methods_restore()`.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(tidycensus)\nlibrary(gt)\nlibrary(srvyr)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n\nAttaching package: 'srvyr'\n\nThe following object is masked from 'package:stats':\n\n    filter\n```\n\n\n:::\n:::\n\n## Defining The Shortfall\n\nIn order to estimate the total housing shortfall in Colorado, we must first define the metrics by which we are going to assess the number of housing units the state might be short.\n\nHow these metrics are defined can have a significant impact on the resulting analysis. As a highly stylized example to demonstrate this concept let's begin by using two examples to bound our estimates:\n\n1.  Every person currently residing in the state does so inside of a permanent housing unit. In this scenario we would have a relatively low estimate of the total number of necessary housing units - as what would be required is enough units to house the state's unhoused population. In this case the estimate of number housing units might just be the estimate of the number of people in this population. However, this could be reduced by changing our requirements of housing to include any shelter - such as tents as vehicles, which would likely bring the estimated much lower.\n2.  Every current US resident who would like to live in Colorado may do so, and they will be able to do so for free. Conversely, in this scenario we might expect an estimate that is quite high, as while some people still may opt not to reside in our beautiful state (perhaps they do not particularly like sun), we could reasonably expect many Americans, perhaps into the hundreds of millions, might opt to spend no money to live in our beautiful state.\n\nIn between these two estimates are a range of scenarios that might be indicative of the number of housing units which are necessary - based on the objectives we are trying to determine, and the underlying assumptions about housing preferences which underlie them. In this paper we will examine a variety of methods, based primarily on studies by other researchers, that we can apply to Colorado to determine the estimated housing shortfall in the state, under that method. In this way we will provide not so much a point estimate of the total housing shortfall, but a range of estimates which can be utilized by planners and policy makers based on their discretion with respect to the reasonableness and applicability of each method. In doing so we also hope to plan a clear, concise, explanation of the method, what objective it is attempting to solve for, and the meaning of the estimate within that context.\n\n## Data\n\nData primarily comes from the most recent American Community Survey (\"ACS\") one year estimates for Colorado, and data from the Colorado State Demography Office (\"SDO\"). One year ACS estimates are primarily used as the population of the state is large enough to allow for the use of such estimates. If applying similar methodologies at smaller geography levels (such as county level), it may be necessary to instead use 5 year estimates. Additionally, some methods of deriving estimates, such as by analyzing Public Use Microdata Sample (\"PUMS\") data may not be possible for all methods. As such many methods determined here may only be applicable at the state level.\n\n## Examples\n\n### Harvard Joint Center for Housing Studies Blog\n\nOne resource that compares four relatively recent national studies attempting to determine housing shortfalls are a January 2024 blog entry from the Harvard Joint Center for Housing Studies (\"JHCS\") [@mccue2024]. The four studies each utilize different methodologies and resulting estimates covering different years. The four studies are:\n\n1.  [National Association of Home Builders (NAHB) 2021](https://www.freddiemac.com/research/insight/20210507-housing-supply)\n2.  [Freddie Mac 2020](https://www.freddiemac.com/research/insight/20210507-housing-supply)\n3.  [National Association of Realtors (NAR) 2021](https://www.nar.realtor/advocacy/housing-is-critical-infrastructure)\n4.  [National Low Income Housing Coalition (NLIHC)](https://nlihc.org/gap)\n\nThe following sections will provide estimates of the housing shortage in Colorado based on each of these study methodologies.\n\n### National Association of Home Builders\n\nThe NAHB study estimates the national housing shortage by examining the difference in ACS vacancy rates in the current year from their long run average. This resulted in an estimated shortage of 1.5 million units.\n\nThe first step is to create a time series of vacancy rates for the state with ACS data. This data is accessed from the IPUMS USA database [@ruggles2024a] using the `ipumsr` package in R [@ipumsr].\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nacs_samples <- get_sample_info(\"usa\") |>\n  filter(str_detect(name, pattern = \"20\\\\d+a$\")) |> \n  pull(name)\n\nipums_dir <- \"data/ipums_raw/\"\nipums_ddi <- \"usa_00080.xml\"\nfile_loc <- paste0(\n  ipums_dir,\n  ipums_ddi\n)\n  if (file.exists(file_loc)) {\n    acs_ddi <- read_ipums_ddi(file_loc)\n    acs_00_23 <- acs_ddi |>\n      read_ipums_micro()\n  } else {\nacs_00_23 <- define_extract_micro(\n      collection = \"usa\",\n      description = \"ACS 1 year samples in Colorado of vacancy variables\",\n      samples = acs_samples,\n      variables = list(\n        var_spec(\"STATEFIP\", case_selections = \"08\"),\n        \"COUNTYFIP\",\n        \"PUMA\",\n        \"GQ\",\n        \"OWNERSHP\",\n        \"VACANCY\",\n        \"REPWT\"\n      ),\n      data_structure = \"household_only\"\n    ) |>\n      submit_extract() |>\n      wait_for_extract() |>\n      download_extract(download_dir = ipums_dir) |>\n      read_ipums_micro()\n  }\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nUse of data from IPUMS USA is subject to conditions including that users should cite the data appropriately. Use command `ipums_conditions()` for more details.\n```\n\n\n:::\n:::\n\nVacancy rates are calculated based on both the `OWNERSHP` and `VACANCY` variables. Additionally the `GQ` variable is used to filter out group quarters.\n\nIn order to calculate vacancy rates it is necessary to first understand what each of the values for each variable represents\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# create acs_info from the DDI which includes variable information\nacs_info <- ipums_var_info(acs_ddi)\n\n# generate table with variable information\n# table will include columns {VAR}_val, and {VAR}_lbl with the value and\n# label for each variable. This is setup so tab_spanner_delim can be used to\n# separate out columns in a GT table\nacs_var_tbl <- acs_info |>\n  # only include necessary variables\n  filter(var_name %in% c('OWNERSHP', 'VACANCY', \"GQ\")) |>\n  # remove other columns\n  select(var_name, val_labels) |>\n  # unnest labels from nested columns\n  unnest(val_labels) |>\n  # group by var_name for generating row numbers to unpivot without lists\n  group_by(var_name) |>\n  # add row_numbers\n  mutate(row = row_number()) |>\n  ungroup() |> \n  # pivot wider to generate table\n  pivot_wider(names_from = var_name,\n              values_from = c(val, lbl),\n              # specify order of variable then val/lbl column\n              names_glue = \"{var_name}_{.value}\",\n              # use slowest so variables are grouped together\n              names_vary = \"slowest\") |>\n  # remove row index as no longer necessary\n  select(-row) |> \n  # move GQ to end\n  relocate(starts_with(\"GQ\"), .after = last_col())\n\n# create GT table with information\nacs_var_tbl_gt <- acs_var_tbl |>\n  gt() |> \n  # create spanners based on the column separators defined above\n tab_spanner_delim(delim = \"_\") |>\n  # Replace NA values with empty strings\n  sub_missing(\n    missing_text = \"\"\n  )\n```\n:::\n\n::: {#tbl-pums-vars .cell tbl-cap='Values and respective labels for each of the `OWNERSHP`, `VACANCY`, and `GQ` variables.'}\n\n```{.r .cell-code .hidden}\n# display table\nacs_var_tbl_gt\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"azmasdquib\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#azmasdquib table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#azmasdquib thead, #azmasdquib tbody, #azmasdquib tfoot, #azmasdquib tr, #azmasdquib td, #azmasdquib th {\n  border-style: none;\n}\n\n#azmasdquib p {\n  margin: 0;\n  padding: 0;\n}\n\n#azmasdquib .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#azmasdquib .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#azmasdquib .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#azmasdquib .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#azmasdquib .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#azmasdquib .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#azmasdquib .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#azmasdquib .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#azmasdquib .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#azmasdquib .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#azmasdquib .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#azmasdquib .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#azmasdquib .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#azmasdquib .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#azmasdquib .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#azmasdquib .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#azmasdquib .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#azmasdquib .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#azmasdquib .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#azmasdquib .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#azmasdquib .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#azmasdquib .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#azmasdquib .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#azmasdquib .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#azmasdquib .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#azmasdquib .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#azmasdquib .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#azmasdquib .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#azmasdquib .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#azmasdquib .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#azmasdquib .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#azmasdquib .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#azmasdquib .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#azmasdquib .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#azmasdquib .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#azmasdquib .gt_left {\n  text-align: left;\n}\n\n#azmasdquib .gt_center {\n  text-align: center;\n}\n\n#azmasdquib .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#azmasdquib .gt_font_normal {\n  font-weight: normal;\n}\n\n#azmasdquib .gt_font_bold {\n  font-weight: bold;\n}\n\n#azmasdquib .gt_font_italic {\n  font-style: italic;\n}\n\n#azmasdquib .gt_super {\n  font-size: 65%;\n}\n\n#azmasdquib .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#azmasdquib .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#azmasdquib .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#azmasdquib .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#azmasdquib .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#azmasdquib .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#azmasdquib .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#azmasdquib .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#azmasdquib div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"spanner-OWNERSHP_val\">\n        <div class=\"gt_column_spanner\">OWNERSHP</div>\n      </th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"spanner-VACANCY_val\">\n        <div class=\"gt_column_spanner\">VACANCY</div>\n      </th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"spanner-GQ_val\">\n        <div class=\"gt_column_spanner\">GQ</div>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"OWNERSHP_val\">val</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"OWNERSHP_lbl\">lbl</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"VACANCY_val\">val</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"VACANCY_lbl\">lbl</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"GQ_val\">val</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"GQ_lbl\">lbl</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"OWNERSHP_val\" class=\"gt_row gt_right\">0</td>\n<td headers=\"OWNERSHP_lbl\" class=\"gt_row gt_left\">N/A</td>\n<td headers=\"VACANCY_val\" class=\"gt_row gt_right\">0</td>\n<td headers=\"VACANCY_lbl\" class=\"gt_row gt_left\">N/A</td>\n<td headers=\"GQ_val\" class=\"gt_row gt_right\">0</td>\n<td headers=\"GQ_lbl\" class=\"gt_row gt_left\">Vacant unit</td></tr>\n    <tr><td headers=\"OWNERSHP_val\" class=\"gt_row gt_right\">1</td>\n<td headers=\"OWNERSHP_lbl\" class=\"gt_row gt_left\">Owned or being bought (loan)</td>\n<td headers=\"VACANCY_val\" class=\"gt_row gt_right\">1</td>\n<td headers=\"VACANCY_lbl\" class=\"gt_row gt_left\">For rent or sale</td>\n<td headers=\"GQ_val\" class=\"gt_row gt_right\">1</td>\n<td headers=\"GQ_lbl\" class=\"gt_row gt_left\">Households under 1970 definition</td></tr>\n    <tr><td headers=\"OWNERSHP_val\" class=\"gt_row gt_right\">2</td>\n<td headers=\"OWNERSHP_lbl\" class=\"gt_row gt_left\">Rented</td>\n<td headers=\"VACANCY_val\" class=\"gt_row gt_right\">2</td>\n<td headers=\"VACANCY_lbl\" class=\"gt_row gt_left\">For sale only</td>\n<td headers=\"GQ_val\" class=\"gt_row gt_right\">2</td>\n<td headers=\"GQ_lbl\" class=\"gt_row gt_left\">Additional households under 1990 definition</td></tr>\n    <tr><td headers=\"OWNERSHP_val\" class=\"gt_row gt_right\"><br /></td>\n<td headers=\"OWNERSHP_lbl\" class=\"gt_row gt_left\"><br /></td>\n<td headers=\"VACANCY_val\" class=\"gt_row gt_right\">3</td>\n<td headers=\"VACANCY_lbl\" class=\"gt_row gt_left\">Rented or sold but not (yet) occupied</td>\n<td headers=\"GQ_val\" class=\"gt_row gt_right\">3</td>\n<td headers=\"GQ_lbl\" class=\"gt_row gt_left\">Group quarters--Institutions</td></tr>\n    <tr><td headers=\"OWNERSHP_val\" class=\"gt_row gt_right\"><br /></td>\n<td headers=\"OWNERSHP_lbl\" class=\"gt_row gt_left\"><br /></td>\n<td headers=\"VACANCY_val\" class=\"gt_row gt_right\">4</td>\n<td headers=\"VACANCY_lbl\" class=\"gt_row gt_left\">For seasonal, recreational or other occasional use</td>\n<td headers=\"GQ_val\" class=\"gt_row gt_right\">4</td>\n<td headers=\"GQ_lbl\" class=\"gt_row gt_left\">Other group quarters</td></tr>\n    <tr><td headers=\"OWNERSHP_val\" class=\"gt_row gt_right\"><br /></td>\n<td headers=\"OWNERSHP_lbl\" class=\"gt_row gt_left\"><br /></td>\n<td headers=\"VACANCY_val\" class=\"gt_row gt_right\">5</td>\n<td headers=\"VACANCY_lbl\" class=\"gt_row gt_left\">For occasional use</td>\n<td headers=\"GQ_val\" class=\"gt_row gt_right\">5</td>\n<td headers=\"GQ_lbl\" class=\"gt_row gt_left\">Additional households under 2000 definition</td></tr>\n    <tr><td headers=\"OWNERSHP_val\" class=\"gt_row gt_right\"><br /></td>\n<td headers=\"OWNERSHP_lbl\" class=\"gt_row gt_left\"><br /></td>\n<td headers=\"VACANCY_val\" class=\"gt_row gt_right\">6</td>\n<td headers=\"VACANCY_lbl\" class=\"gt_row gt_left\">For seasonal use</td>\n<td headers=\"GQ_val\" class=\"gt_row gt_right\">6</td>\n<td headers=\"GQ_lbl\" class=\"gt_row gt_left\">Fragment</td></tr>\n    <tr><td headers=\"OWNERSHP_val\" class=\"gt_row gt_right\"><br /></td>\n<td headers=\"OWNERSHP_lbl\" class=\"gt_row gt_left\"><br /></td>\n<td headers=\"VACANCY_val\" class=\"gt_row gt_right\">7</td>\n<td headers=\"VACANCY_lbl\" class=\"gt_row gt_left\">For migrant farm workers</td>\n<td headers=\"GQ_val\" class=\"gt_row gt_right\"><br /></td>\n<td headers=\"GQ_lbl\" class=\"gt_row gt_left\"><br /></td></tr>\n    <tr><td headers=\"OWNERSHP_val\" class=\"gt_row gt_right\"><br /></td>\n<td headers=\"OWNERSHP_lbl\" class=\"gt_row gt_left\"><br /></td>\n<td headers=\"VACANCY_val\" class=\"gt_row gt_right\">8</td>\n<td headers=\"VACANCY_lbl\" class=\"gt_row gt_left\">For seasonal use or migratory</td>\n<td headers=\"GQ_val\" class=\"gt_row gt_right\"><br /></td>\n<td headers=\"GQ_lbl\" class=\"gt_row gt_left\"><br /></td></tr>\n    <tr><td headers=\"OWNERSHP_val\" class=\"gt_row gt_right\"><br /></td>\n<td headers=\"OWNERSHP_lbl\" class=\"gt_row gt_left\"><br /></td>\n<td headers=\"VACANCY_val\" class=\"gt_row gt_right\">9</td>\n<td headers=\"VACANCY_lbl\" class=\"gt_row gt_left\">Other vacant</td>\n<td headers=\"GQ_val\" class=\"gt_row gt_right\"><br /></td>\n<td headers=\"GQ_lbl\" class=\"gt_row gt_left\"><br /></td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n@tbl-pums-vars includes the values and respective labels for each of the `OWNERSHP`, `VACANCY`, and `GQ` variables.\n\nThe N/A labels associated with `val=0` for the `OWNERSHP` and `VACANCY` variables is reflective of units which are Vacant, or Occupied, respectively.\n\nGiven these values we then need to establish filtering parameters for determining vacancy rates.\n\n1.  `GQ <= 2 OR GQ ==5` filter out GQ units to only included Households and Vacant Units (including with the 1990 and 2000 Additional Unit definitions)[^1].\n2.  `VACANCY <=2` Remove occasional/seasonal vacant units (4-6) consistent with NAHB analysis. Remove migrant farm worker usage (7), and other vacant (9), as these should be relatively independent of overall vacancy rates. Reclassify `3` - Rented or sold but not (yet) occupied to `0` as occupied.\n3.  Leave Ownership as is.\n\n[^1]: Note to self - review these definitions to see if we want to exclude any of these groupings.\n\nIn order to broadly analyze survey data, and additionally calculate margin of error, the `srvyr` package is used. Prior to analysis a survey object must be defined based on the extracted ACS data. This survey object filters GQ units based on condition 1 above, and removes vacant units based on condition 2 above. Additionally, it reclassifies `VACANCY == 3` to `0` as occupied. Finally, `N/A` values are relabeled for each of the OWNERSHP, and VACANCY variables to reflict that these reflect Vacant and Occupied units, respectively.\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# create survey design object\nacs_srvy <- acs_00_23 |> \n    as_survey_design(\n      weight = HHWT,\n        repweights = matches(\"REPWT[0-9]+\"),\n        type = \"ACS\", mse = TRUE) |> \n# remove GQ units and vacant units 4-6\n  filter(GQ %in% c(0,1,2,5) & !(VACANCY %in% c(4:6, 7, 9)))  |> \n  # reclassify 3 to 0 and 4-6 to 3\n  mutate(\n    VACANCY = lbl_relabel(VACANCY, 0 ~.val == 3),\n    OWNERSHP = lbl_relabel(OWNERSHP, lbl(0, \"Vacant\") ~ .val == 0)#,\n    #VACANCY = lbl_relabel(VACANCY, lbl(0, \"Occupied\") ~ .val == 0)\n    )\n```\n:::\n\nThen total up on an annual basis the total occupied units each for sale and for rent, as well as vacant units by for sale or for rent[^2]\\[\\^margin of error are calculated as 1.645 \\* standard error consistent with 90% CI\\]. We additionally calculate total occupied and total vacant as the sum of each of these. Vacancy rates are then calculated as $\\sum VACANT_{ot}\\over {\\sum VACANT_{ot}+ \\sum OCCUPIED_{ot}}$ for each occupancy status $o$ and year $t$. Finally we calculate the sum total of occupied and vacant units for each year[^3].\n\n[^2]: For this purpose we make the assumption that `VACANCY == 1` (For rent or sale) is for Rent, and `VACANCY ==2` (For sale only) is for sale in order to the simplify the analysis.\n\n[^3]: Note to self - verify that margin of error are additive\n\nOnce the vacancy rates are calculated, we then calculate the average vacancy rate for each year. To get an annual shortfall we then take the difference between the average vacancy rate and the current vacancy rate. Applying this difference to the total number of units for each year gives us the annual shortfall.\n\nIn combining vacancy rates a `tenure` variable is created to determine if a unit is determined to be sale or rental for the purpose of calculating vacancy rates. This is set equal to the value `rent` for `OWNSHP == 2` and `VACANCY == 1`, and `own` for `OWNSHP == 1` and `VACANCY == 2`; consistent with the classifications determined above.\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# calculate vacancy\nacs_vacancy <- acs_srvy |> \n  group_by(VACANCY, YEAR) |> \n  survey_count(VACANCY, name = \"vac\") |> \n  mutate(\n    vac_moe = vac_se *1.645,\n    tenure = case_when(\n      VACANCY == 1 ~ \"rent\",\n      VACANCY == 2 ~ \"own\"\n    )\n  ) |> \n    filter(!is.na(tenure)) |>\n  ungroup()\n\n# calculate occupied\nacs_occupancy <- acs_srvy |> \n  group_by(OWNERSHP, YEAR) |> \n  survey_count(OWNERSHP, name = \"occ\") |> \n  mutate(\n    occ_moe = occ_se *1.645,\n    tenure = case_when(\n      OWNERSHP == 1 ~ \"own\",\n      OWNERSHP == 2 ~ \"rent\"\n    )\n  )|> \n    filter(!is.na(tenure)) |> \n  ungroup()\n\n# calculate total occupied and total vacant\nacs_combined_ov <- acs_vacancy |> \n  select(YEAR, tenure, vac, vac_moe) |>\n  left_join(acs_occupancy |> \n              select(YEAR, tenure, occ, occ_moe), \n            by = c(\"YEAR\", \"tenure\")) %>% # old style pipe needs to be used to pipe . into bind_rows\n  bind_rows(\n    summarize(\n      .,\n    tenure = \"total\", \n    across(c(vac:occ_moe), sum),\n    .by = YEAR)\n    ) |> \n  mutate(\n    total = vac + occ,\n    vac_rate = vac/total\n  ) |> \n  group_by(tenure) |> \n  mutate(avg_vac_rate = mean(vac_rate)) |> \n  ungroup() |>\n  mutate(\n    diff_from_avg = avg_vac_rate - vac_rate,\n    shortfall = diff_from_avg * total)\n\ncurrent_shortfall <- acs_combined_ov |> \n  filter(YEAR == 2023) |> \n  select(-YEAR) |> \n  mutate(tenure = str_to_title(tenure)) |> \n  gt() |> \n  fmt_number(c(vac:total, shortfall), decimals = 0) |> \n  fmt_percent(c(vac_rate:diff_from_avg)) |> \n  cols_label(\n    tenure = \"Tenure\", \n    vac = \"Vacant\", \n    vac_moe = \"Margin of Error\", \n    occ = \"Occupied\", \n    occ_moe = \"Margin of Error\", \n    total = \"Total\", \n    vac_rate = \"Vacancy Rate\", \n    avg_vac_rate = \"Average Vacancy Rate\", \n    diff_from_avg = \"Difference from Average\", \n    shortfall = \"Shortfall\"\n  ) |> \n    cols_align(\"center\")\n```\n:::\n\n::: {#tbl-nahb-shortfall .cell tbl-cap='Current shortfall of occupied housing units by tenure type using NAHB Methodology.'}\n\n```{.r .cell-code .hidden}\ncurrent_shortfall\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"zgmjozkmbk\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#zgmjozkmbk table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#zgmjozkmbk thead, #zgmjozkmbk tbody, #zgmjozkmbk tfoot, #zgmjozkmbk tr, #zgmjozkmbk td, #zgmjozkmbk th {\n  border-style: none;\n}\n\n#zgmjozkmbk p {\n  margin: 0;\n  padding: 0;\n}\n\n#zgmjozkmbk .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#zgmjozkmbk .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zgmjozkmbk .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zgmjozkmbk .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zgmjozkmbk .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zgmjozkmbk .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zgmjozkmbk .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zgmjozkmbk .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zgmjozkmbk .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#zgmjozkmbk .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#zgmjozkmbk .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zgmjozkmbk .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zgmjozkmbk .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zgmjozkmbk .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zgmjozkmbk .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zgmjozkmbk .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#zgmjozkmbk .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#zgmjozkmbk .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#zgmjozkmbk .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zgmjozkmbk .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#zgmjozkmbk .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zgmjozkmbk .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zgmjozkmbk .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zgmjozkmbk .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zgmjozkmbk .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zgmjozkmbk .gt_left {\n  text-align: left;\n}\n\n#zgmjozkmbk .gt_center {\n  text-align: center;\n}\n\n#zgmjozkmbk .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zgmjozkmbk .gt_font_normal {\n  font-weight: normal;\n}\n\n#zgmjozkmbk .gt_font_bold {\n  font-weight: bold;\n}\n\n#zgmjozkmbk .gt_font_italic {\n  font-style: italic;\n}\n\n#zgmjozkmbk .gt_super {\n  font-size: 65%;\n}\n\n#zgmjozkmbk .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#zgmjozkmbk .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#zgmjozkmbk .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#zgmjozkmbk .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#zgmjozkmbk .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#zgmjozkmbk .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#zgmjozkmbk .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#zgmjozkmbk .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#zgmjozkmbk div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"tenure\">Tenure</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"vac\">Vacant</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"vac_moe\">Margin of Error</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"occ\">Occupied</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"occ_moe\">Margin of Error</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"total\">Total</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"vac_rate\">Vacancy Rate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"avg_vac_rate\">Average Vacancy Rate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"diff_from_avg\">Difference from Average</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"shortfall\">Shortfall</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"tenure\" class=\"gt_row gt_center\">Rent</td>\n<td headers=\"vac\" class=\"gt_row gt_center\">41,901</td>\n<td headers=\"vac_moe\" class=\"gt_row gt_center\">5,192</td>\n<td headers=\"occ\" class=\"gt_row gt_center\">835,314</td>\n<td headers=\"occ_moe\" class=\"gt_row gt_center\">22,166</td>\n<td headers=\"total\" class=\"gt_row gt_center\">877,215</td>\n<td headers=\"vac_rate\" class=\"gt_row gt_center\">4.78%</td>\n<td headers=\"avg_vac_rate\" class=\"gt_row gt_center\">6.53%</td>\n<td headers=\"diff_from_avg\" class=\"gt_row gt_center\">1.76%</td>\n<td headers=\"shortfall\" class=\"gt_row gt_center\">15,414</td></tr>\n    <tr><td headers=\"tenure\" class=\"gt_row gt_center\">Own</td>\n<td headers=\"vac\" class=\"gt_row gt_center\">12,816</td>\n<td headers=\"vac_moe\" class=\"gt_row gt_center\">2,753</td>\n<td headers=\"occ\" class=\"gt_row gt_center\">1,592,949</td>\n<td headers=\"occ_moe\" class=\"gt_row gt_center\">24,524</td>\n<td headers=\"total\" class=\"gt_row gt_center\">1,605,765</td>\n<td headers=\"vac_rate\" class=\"gt_row gt_center\">0.80%</td>\n<td headers=\"avg_vac_rate\" class=\"gt_row gt_center\">1.64%</td>\n<td headers=\"diff_from_avg\" class=\"gt_row gt_center\">0.84%</td>\n<td headers=\"shortfall\" class=\"gt_row gt_center\">13,549</td></tr>\n    <tr><td headers=\"tenure\" class=\"gt_row gt_center\">Total</td>\n<td headers=\"vac\" class=\"gt_row gt_center\">54,717</td>\n<td headers=\"vac_moe\" class=\"gt_row gt_center\">7,945</td>\n<td headers=\"occ\" class=\"gt_row gt_center\">2,428,263</td>\n<td headers=\"occ_moe\" class=\"gt_row gt_center\">46,690</td>\n<td headers=\"total\" class=\"gt_row gt_center\">2,482,980</td>\n<td headers=\"vac_rate\" class=\"gt_row gt_center\">2.20%</td>\n<td headers=\"avg_vac_rate\" class=\"gt_row gt_center\">3.32%</td>\n<td headers=\"diff_from_avg\" class=\"gt_row gt_center\">1.12%</td>\n<td headers=\"shortfall\" class=\"gt_row gt_center\">27,699</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n\n```{.r .cell-code .hidden}\n# define get_shortfall function to return shortfall based on tenure and format data\nextract_shortfall <- function (ten_type) {\n  current_shortfall |> \n    fmt_number(\n      decimals = 1,\n      suffixing = \"K\") |> \n    extract_cells(shortfall, rows = tenure == ten_type)\n}\n```\n:::\n\n@tbl-nahb-shortfall contains the calculated shortfall for 2023 using the NAHB methodology. Using this methodology shortfalls of 15.4K units for rent and 13.5K units for ownership are determined, for a total shortfall of 27.7K^[Note: the Total shortfall is less than the sum of the own and vacant shortfalls due to differences in calculations].\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}